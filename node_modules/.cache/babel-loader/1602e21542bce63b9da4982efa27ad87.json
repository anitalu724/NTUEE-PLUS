{"ast":null,"code":"import _defineProperty from \"/Users/anitalu/Desktop/NTUEE-PLUS/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { map } from './map';\nimport axios from 'axios';\nexport function showVisual() {\n  axios.post(\"/api/showVisual\", {}).then(res => {\n    console.log(res.data);\n\n    if (res.data) {\n      if (res.data.message === true) {\n        var D = res.data.data;\n        var sta = {};\n        map.forEach(elements => {\n          //(elements[0]===\"userimage\") && (elements\n          var arr = elements[1].split('.');\n          var val = D;\n          var i;\n\n          for (i = 0; i < arr.length; i++) {\n            val = val[arr[i]];\n\n            if (val === undefined) {\n              val = elements.length <= 2 ? '' : elements[2];\n              break;\n            }\n          }\n\n          sta[elements[0]] = val;\n        });\n        sta.InitWorkNum = res.data.data.Occupation.length;\n        sta.imagePreviewUrl = sta.userimage;\n        console.log('sta=', sta);\n        this.setState(sta);\n        res.data.data.Occupation.forEach((item, index) => {\n          this.setState({\n            [\"work_O_\".concat(index + 1)]: item.O === undefined ? '' : item.O,\n            [\"work_P_\".concat(index + 1)]: item.P === undefined ? '' : item.P,\n            [\"work_C_\".concat(index + 1)]: item.C === undefined ? '' : item.C,\n            [\"work_show_\".concat(index + 1)]: item.show\n          }, function () {\n            this.addOccupation(true);\n          });\n        });\n      } else {\n        alert('錯誤：\\n' + res.data.description);\n      }\n    }\n  });\n}\n;\nexport function handleSubmit(event) {\n  event.preventDefault();\n  console.log(this.state);\n\n  if (false) {\n    alert(\"一些判斷式\"); //validation\n  } else {\n    var r = window.confirm(\"確認更改?\");\n\n    if (r) {\n      var sta = new FormData();\n      map.forEach(elements => {\n        if (this.state.hasChanged[elements[0]] && this.state[elements[0]] !== undefined) {\n          sta.append(elements[1], this.state[elements[0]]);\n        } //sta[elements[1]]=this.state[elements[0]]//資料形式從{}改成FormData\n\n      });\n      var toModify = {};\n      var toRemove = {};\n      var toInsert = {};\n\n      for (var workL = 1; workL <= this.state.InitWorkNum; workL++) {\n        console.log('workL0', workL);\n\n        if (this.state.hasChanged[\"work_\".concat(workL)] === true) {\n          toRemove[\"work_\".concat(workL)] = 1;\n        } else {\n          ['O', 'P', 'C'].forEach(word => {\n            if (this.state.hasChanged[\"work_\".concat(word, \"_\").concat(workL)]) {\n              toModify[\"work_\".concat(word, \"_\").concat(workL)] = this.state[\"work_\".concat(word, \"_\").concat(workL)];\n            }\n          });\n        }\n      }\n\n      if (Object.entries(toModify).length !== 0) sta.append('Occupation.Modify', JSON.stringify(toModify));\n      if (Object.entries(toRemove).length !== 0) sta.append('Occupation.Remove', JSON.stringify(toRemove));\n\n      for (var workL = this.state.InitWorkNum + 1; workL <= this.state.Occupation_number; workL++) {\n        console.log('workL', workL);\n        ['O', 'P', 'C'].forEach(word => {\n          console.log('word', word);\n\n          if (this.state.hasChanged[\"work_\".concat(word, \"_\").concat(workL)]) {\n            toInsert[\"work_\".concat(word, \"_\").concat(workL)] = this.state[\"work_\".concat(word, \"_\").concat(workL)];\n          }\n        });\n      }\n\n      console.log('insert', toInsert);\n      if (Object.entries(toInsert).length !== 0) sta.append('Occupation.Insert', JSON.stringify(toInsert));\n      console.log('sta', sta);\n      const config = {\n        headers: {\n          'content-type': 'multipart/form-data'\n        }\n      };\n      axios.post(\"/api/chVisual\", sta\n      /*{\r\n      \"username.show\": this.state.realname_checkbox,\r\n      \"username.data\": this.state.realname,\r\n      \"nickname.data\" : this.state.,\r\n      \"profile.data\" : this.state.shortintro,\r\n      \t\teducation:[\r\n      \t{\r\n      \t\tSD : this.Profile_diploma_bachelor_major,\r\n      \t\tNote : \"\",\r\n      \t}\r\n      ],\r\n      publicEmail : this.Profile_email,\r\n      office : this.Profile_phone_company,\r\n      cellphone : this.Profile_mobile,\r\n      CC : this.Profile_address,\r\n      Occupation:[\r\n      \t\"\",\r\n      \t\"\"\r\n      ],\r\n      JobID:this.state.JobID\r\n      }*/\n      , config).then(res => {\n        console.log(res.data);\n\n        if (res.data) {\n          if (res.data.message === true) {\n            alert(\"修改成功!\");\n\n            var hasChanged = _objectSpread({}, this.state.hasChanged);\n\n            map.forEach(element => {\n              hasChanged[element[0]] = false;\n            });\n            this.setState({\n              hasChanged\n            }); //window.location = ? in's router hasn't done yet\n          } else {\n            alert(\"錯誤: \\n\" + res.data.description);\n          }\n        }\n      });\n    }\n  }\n}","map":{"version":3,"sources":["/Users/anitalu/Desktop/NTUEE-PLUS/src/in/profileFunc/showAndSubmit.js"],"names":["map","axios","showVisual","post","then","res","console","log","data","message","D","sta","forEach","elements","arr","split","val","i","length","undefined","InitWorkNum","Occupation","imagePreviewUrl","userimage","setState","item","index","O","P","C","show","addOccupation","alert","description","handleSubmit","event","preventDefault","state","r","window","confirm","FormData","hasChanged","append","toModify","toRemove","toInsert","workL","word","Object","entries","JSON","stringify","Occupation_number","config","headers","element"],"mappings":"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","sourcesContent":["import {map} from './map';\r\nimport axios from 'axios';\r\n\r\nexport function showVisual(){\r\n\taxios.post(\"/api/showVisual\", \r\n\t\t{}\r\n\t).then(res => {\r\n\t\tconsole.log(res.data);\r\n\t\t\tif(res.data){\r\n\t\t\t\tif(res.data.message===true){\r\n\t\t\t\t\tvar D = res.data.data;\r\n\t\t\t\t\tvar sta = {}\r\n\t\t\t\t\tmap.forEach(elements=>{\r\n\t\t\t\t\t\t//(elements[0]===\"userimage\") && (elements\r\n\t\t\t\t\t\tvar arr = elements[1].split('.')\r\n\t\t\t\t\t\tvar val = D;\r\n\t\t\t\t\t\tvar i;\r\n\t\t\t\t\t\tfor(i=0;i<arr.length;i++){\r\n\t\t\t\t\t\t\tval = val[arr[i]];\r\n\t\t\t\t\t\t\tif(val===undefined){\r\n\t\t\t\t\t\t\t\tval=(elements.length<=2)?'':elements[2]\r\n\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsta[elements[0]]=val;\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsta.InitWorkNum = res.data.data.Occupation.length;\r\n\t\t\t\t\tsta.imagePreviewUrl = sta.userimage;\r\n\t\t\t\t\tconsole.log('sta=',sta)\r\n\t\t\t\t\tthis.setState(sta);\r\n\t\t\t\t\tres.data.data.Occupation.forEach((item,index)=>{\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t[`work_O_${index+1}`] : (item.O===undefined)?'':item.O,\r\n\t\t\t\t\t\t\t[`work_P_${index+1}`] : (item.P===undefined)?'':item.P,\r\n\t\t\t\t\t\t\t[`work_C_${index+1}`] : (item.C===undefined)?'':item.C,\r\n\t\t\t\t\t\t\t[`work_show_${index+1}`] : item.show\r\n\t\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t\tthis.addOccupation(true)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\talert('錯誤：\\n'+res.data.description);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t})\r\n};\r\n\r\nexport function handleSubmit(event){\r\n\tevent.preventDefault();\r\n\tconsole.log(this.state);\r\n\tif(false){\r\n\t\talert(\"一些判斷式\") //validation\r\n\t}else{\r\n\t\tvar r = window.confirm(\"確認更改?\");\r\n\t\tif (r){\r\n\t\t\tvar sta= new FormData();\r\n\t\t\tmap.forEach(elements=>{\r\n\t\t\t\tif(this.state.hasChanged[elements[0]] && this.state[elements[0]]!==undefined){\r\n\t\t\t\t\tsta.append(elements[1],this.state[elements[0]])\r\n\t\t\t\t}\r\n\t\t\t\t//sta[elements[1]]=this.state[elements[0]]//資料形式從{}改成FormData\r\n\t\t\t})\r\n\t\t\tvar toModify = {}\r\n\t\t\tvar toRemove = {}\r\n\t\t\tvar toInsert = {}\r\n\t\t\tfor(var workL = 1;workL<=this.state.InitWorkNum;workL++){\r\n\t\t\t\tconsole.log('workL0',workL)\r\n\t\t\t\tif(this.state.hasChanged[`work_${workL}`]===true){\r\n\t\t\t\t\ttoRemove[`work_${workL}`] = 1\r\n\t\t\t\t}else{\r\n\t\t\t\t\t(['O','P','C']).forEach(word=>{\r\n\t\t\t\t\t\tif(this.state.hasChanged[`work_${word}_${workL}`]){\r\n\t\t\t\t\t\t\ttoModify[`work_${word}_${workL}`] = this.state[`work_${word}_${workL}`]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(Object.entries(toModify).length!==0) sta.append('Occupation.Modify',JSON.stringify(toModify))\r\n\t\t\tif(Object.entries(toRemove).length!==0)  sta.append('Occupation.Remove',JSON.stringify(toRemove))\r\n\t\t\tfor(var workL = this.state.InitWorkNum+1;workL<=this.state.Occupation_number;workL++){\r\n\t\t\t\tconsole.log('workL',workL);\r\n\t\t\t\t(['O','P','C']).forEach(word=>{\r\n\t\t\t\t\tconsole.log('word',word)\r\n\t\t\t\t\tif(this.state.hasChanged[`work_${word}_${workL}`]){\r\n\t\t\t\t\t\ttoInsert[`work_${word}_${workL}`] = this.state[`work_${word}_${workL}`]\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tconsole.log('insert',toInsert)\r\n\t\t\tif(Object.entries(toInsert).length!==0)  sta.append('Occupation.Insert',JSON.stringify(toInsert))\r\n\t\t\tconsole.log('sta',sta)\r\n\t\t\tconst config = {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'content-type': 'multipart/form-data'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\taxios.post(\"/api/chVisual\"\r\n\t\t\t,\r\n\t\t\tsta\r\n\t\t\t/*{\r\n\t\t\t\"username.show\": this.state.realname_checkbox,\r\n\t\t\t\"username.data\": this.state.realname,\r\n\t\t\t\"nickname.data\" : this.state.,\r\n\t\t\t\"profile.data\" : this.state.shortintro,\r\n\r\n\t\t\teducation:[\r\n\t\t\t\t{\r\n\t\t\t\t\tSD : this.Profile_diploma_bachelor_major,\r\n\t\t\t\t\tNote : \"\",\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tpublicEmail : this.Profile_email,\r\n\t\t\toffice : this.Profile_phone_company,\r\n\t\t\tcellphone : this.Profile_mobile,\r\n\t\t\tCC : this.Profile_address,\r\n\t\t\tOccupation:[\r\n\t\t\t\t\"\",\r\n\t\t\t\t\"\"\r\n\t\t\t],\r\n\t\t\tJobID:this.state.JobID\r\n\t\t\t}*/,\r\n\t\t\tconfig\r\n\t\t\t).then(res => {\r\n\r\n\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\tif (res.data){\r\n\t\t\t\t\t\tif (res.data.message === true){ \r\n\t\t\t\t\t\t\talert(\"修改成功!\");\r\n\t\t\t\t\t\t\t\tvar hasChanged = {...this.state.hasChanged}\r\n\t\t\t\t\t\t\t\tmap.forEach(element=>{\r\n\t\t\t\t\t\t\t\t\thasChanged[element[0]] = false;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.setState({hasChanged});\r\n\t\t\t\t\t\t\t//window.location = ? in's router hasn't done yet\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\talert(\"錯誤: \\n\"+res.data.description);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}