{"ast":null,"code":"var _jsxFileName = \"/home/noidname/\\u684C\\u9762/NTUEE-PLUS/src/in/search.js\";\nimport React, { Component } from 'react';\nimport { Switch, Redirect, Route, Link } from \"react-router-dom\";\nimport Button from '@material-ui/core/Button';\nimport ReactDOM from \"react-dom\";\nimport { NavBar_in } from '../component/AppBar_in';\nimport axios from 'axios';\nimport { handleInputChange } from \"./searchFunc/handleChange\";\nvar map = [[\"account\", \"account\"], [\"username\", \"username\"], [\"nickname\", \"nickname\"], [\"profile\", \"profile\"], [\"publicEmail\", \"publicEmail\"], [\"office\", \"office\"], [\"homephone\", \"homephone\"], [\"cellphone\", \"cellphone\"], [\"major\", \"education.major\"], [\"double_major\", \"education.double_major\"], [\"minor\", \"education.minor\"], [\"master\", \"education.master\"], [\"doctor\", \"education.doctor\"], [\"Company\", \"Occupation.C\"], [\"Occupation\", \"Occupation.O\"], [\"Position\", \"Occupation.P\"]];\n\nclass Search extends Component {\n  constructor(props) {\n    super(props);\n    var tmpState = {\n      hasChanged: {}\n    };\n    map.forEach(arr => {\n      tmpState[arr[1]] = '';\n    });\n    this.state = tmpState;\n    this.handleInputChange = handleInputChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.creatTable = this.creatTable.bind(this);\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    var r = window.confirm(\"確認搜尋?\");\n\n    if (r) {\n      var toSend = {};\n      map.forEach(arr => {\n        if (this.state.hasChanged[arr[1]]) {\n          toSend[arr[1]] = this.state[arr[1]];\n        }\n      });\n      console.log('toSend', toSend);\n      axios.post(\"/api/searchVisual\", toSend).then(res => {\n        if (res.data) {\n          if (res.data.message === true) {\n            const receive = res.data.data;\n            console.log('獲得' + receive.length + '筆資料');\n            console.log(receive);\n          } else {\n            alert(\"錯誤: \\n\" + res.data.description);\n          }\n        }\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.creatTable();\n  }\n\n  creatTable() {\n    var ST = document.getElementById(\"Search_table\");\n    map.forEach(arr => {\n      var new_tr = document.createElement(\"tr\");\n      var new_td1 = document.createElement(\"td\");\n      new_td1.innerHTML = arr[0];\n      var new_td2 = document.createElement(\"td\");\n      new_td2.setAttribute(\"colSpan\", 2);\n      var new_input = document.createElement(\"input\");\n      new_input.setAttribute(\"name\", arr[1]);\n      new_input.setAttribute(\"value\", this.state[arr[1]]);\n      new_input.onchange = this.handleInputChange;\n      new_td2.appendChild(new_input);\n      new_tr.appendChild(new_td1);\n      new_tr.appendChild(new_td2);\n      ST.appendChild(new_tr);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"search_container\",\n      style: {\n        marginTop: \"8%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      id: \"Search_Form\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      id: \"Search_table\",\n      cellSpacing: \"10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/home/noidname/桌面/NTUEE-PLUS/src/in/search.js"],"names":["React","Component","Switch","Redirect","Route","Link","Button","ReactDOM","NavBar_in","axios","handleInputChange","map","Search","constructor","props","tmpState","hasChanged","forEach","arr","state","bind","handleSubmit","creatTable","event","preventDefault","r","window","confirm","toSend","console","log","post","then","res","data","message","receive","length","alert","description","componentDidMount","ST","document","getElementById","new_tr","createElement","new_td1","innerHTML","new_td2","setAttribute","new_input","onchange","appendChild","render","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {Switch,Redirect,Route,Link} from \"react-router-dom\"\r\nimport Button from '@material-ui/core/Button';\r\nimport ReactDOM from \"react-dom\";\r\nimport {NavBar_in} from '../component/AppBar_in';\r\nimport axios from 'axios';\r\n\r\nimport {handleInputChange} from \"./searchFunc/handleChange\";\r\n\r\nvar map = [\r\n\t[\"account\",\"account\"],\r\n\t[\"username\",\"username\"],\r\n\t[\"nickname\",\"nickname\"],\r\n\t[\"profile\",\"profile\"],\r\n\t[\"publicEmail\",\"publicEmail\"],\r\n\t[\"office\",\"office\"],\r\n\t[\"homephone\",\"homephone\"],\r\n\t[\"cellphone\",\"cellphone\"],\r\n\t[\"major\",\"education.major\"],\r\n\t[\"double_major\",\"education.double_major\"],\r\n\t[\"minor\",\"education.minor\"],\r\n\t[\"master\",\"education.master\"],\r\n\t[\"doctor\",\"education.doctor\"],\r\n\t[\"Company\",\"Occupation.C\"],\r\n\t[\"Occupation\",\"Occupation.O\"],\r\n\t[\"Position\",\"Occupation.P\"]\r\n];\r\n\r\nclass Search extends Component{\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\tvar tmpState = {hasChanged:{}};\r\n\t\tmap.forEach(arr=>{\r\n\t\t\ttmpState[arr[1]]='';\r\n\t\t});\r\n\t\tthis.state = tmpState;\r\n\t\tthis.handleInputChange = handleInputChange.bind(this);\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\tthis.creatTable = this.creatTable.bind(this);\r\n\t}\r\n\t\r\n\thandleSubmit(event){\r\n\t\tevent.preventDefault();\r\n\t\tvar r = window.confirm(\"確認搜尋?\");\r\n\t\tif(r){\r\n\t\t\tvar toSend = {}\r\n\t\t\tmap.forEach(arr=>{\r\n\t\t\t\tif(this.state.hasChanged[arr[1]]){\r\n\t\t\t\t\ttoSend[arr[1]] = this.state[arr[1]]\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tconsole.log('toSend',toSend)\r\n\t\t\taxios.post(\"/api/searchVisual\",\r\n\t\t\t\ttoSend\r\n\t\t\t).then(res=>{\r\n\t\t\t\tif(res.data){\r\n\t\t\t\t\tif(res.data.message===true){\r\n\t\t\t\t\t\tconst receive = res.data.data;\r\n\t\t\t\t\t\tconsole.log('獲得'+receive.length+'筆資料');\r\n\t\t\t\t\t\tconsole.log(receive);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(\"錯誤: \\n\"+res.data.description);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tthis.creatTable();\r\n\t}\r\n\tcreatTable(){\r\n\t\tvar ST = document.getElementById(\"Search_table\");\r\n\t\tmap.forEach(arr=>{\r\n\t\t\tvar new_tr = document.createElement(\"tr\");\r\n\t\t\t\r\n\t\t\tvar new_td1 = document.createElement(\"td\");\r\n\t\t\tnew_td1.innerHTML=arr[0];\r\n\t\t\t\r\n\t\t\tvar new_td2 = document.createElement(\"td\");\r\n\t\t\tnew_td2.setAttribute(\"colSpan\",2);\r\n\t\t\tvar new_input = document.createElement(\"input\");\r\n\t\t\tnew_input.setAttribute(\"name\",arr[1]);\r\n\t\t\tnew_input.setAttribute(\"value\",this.state[arr[1]])\r\n\t\t\tnew_input.onchange = this.handleInputChange;\r\n\t\t\tnew_td2.appendChild(new_input)\r\n\t\t\t\r\n\t\t\tnew_tr.appendChild(new_td1)\r\n\t\t\tnew_tr.appendChild(new_td2)\r\n\t\t\t\r\n\t\t\tST.appendChild(new_tr)\r\n\t\t})\r\n\t}\r\n\trender(){\r\n        return (\r\n        <div id = \"search_container\" style={{marginTop:\"8%\"}}>\r\n\t\t\t<form id=\"Search_Form\" onSubmit={this.handleSubmit}>\r\n\t\t\t  <table id = \"Search_table\" cellSpacing=\"10\">\r\n\t\t\t  </table>\r\n\t\t\t  <input type=\"submit\" value=\"Search\" />\r\n\t\t\t</form>\r\n\t\t</div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Search;\r\n"]},"metadata":{},"sourceType":"module"}